{"map":"{\"version\":3,\"sources\":[\"forum.js\"],\"names\":[\"module\",\"exports\",\"modules\",\"installedModules\",\"__webpack_require__\",\"moduleId\",\"i\",\"l\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"flarum\",\"core\",\"compat\",\"__webpack_exports__\",\"extend_\",\"external_flarum_core_compat_app_\",\"external_flarum_core_compat_app_default\",\"components_\",\"_typeof\",\"iterator\",\"constructor\",\"_classCallCheck\",\"a\",\"TypeError\",\"_defineProperties\",\"e\",\"length\",\"configurable\",\"writable\",\"_toPropertyKey\",\"toPrimitive\",\"String\",\"Number\",\"_toPrimitive\",\"_callSuper\",\"_getPrototypeOf\",\"ReferenceError\",\"_assertThisInitialized\",\"_possibleConstructorReturn\",\"Boolean\",\"valueOf\",\"Reflect\",\"construct\",\"_isNativeReflectConstruct\",\"apply\",\"_get\",\"_superPropBase\",\"getOwnPropertyDescriptor\",\"arguments\",\"setPrototypeOf\",\"getPrototypeOf\",\"__proto__\",\"_setPrototypeOf\",\"IframeModal_IframeModal\",\"_Modal\",\"IframeModal\",\"this\",\"_inherits\",\"_createClass\",\"vnode\",\"url\",\"prop\",\"console\",\"log\",\"className\",\"app\",\"translator\",\"trans\",\"bidi\",\"placeholder\",\"type\",\"onclick\",\"embedIframe\",\"composer\",\"body\",\"iframeUrl\",\"concat\",\"encodeURIComponent\",\"iframeCode\",\"modal\",\"close\",\"ComposerBody_\",\"ComposerBody_default\",\"Button_\",\"Button_default\",\"initializers\",\"add\",\"items\",\"user\",\"permissions\",\"hasPermission\",\"component\",\"icon\",\"show\",\"children\"],\"mappings\":\"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\"}","code":"module.exports=function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"\",o(o.s=7)}([function(e,t){e.exports=flarum.core.compat.app},function(e,t){e.exports=flarum.core.compat[\"common/components\"]},function(e,t){e.exports=flarum.core.compat[\"core/extend\"]},function(e,t){e.exports=flarum.core.compat[\"forum/components/ComposerBody\"]},function(e,t){e.exports=flarum.core.compat[\"common/components/Button\"]},,,function(e,t,o){\"use strict\";o.r(t);var r=o(2),n=o(0),a=o.n(n),u=o(1);function i(e){return(i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function f(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if(\"object\"!=i(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||\"default\");if(\"object\"!=i(r))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"==i(t)?t:t+\"\"}function s(e,t,o){return t=y(t),function(e,t){if(t&&(\"object\"==i(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,o||[],y(e).constructor):t.apply(e,o))}function p(){return(p=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,o){var r=b(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(arguments.length<3?e:o):n.value}}).apply(null,arguments)}function b(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(){return c(this,t),s(this,t,arguments)}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&d(e,t)}(t,e),function(e,t,o){return t&&f(e.prototype,t),o&&f(e,o),Object.defineProperty(e,\"prototype\",{writable:!1}),e}(t,[{key:\"oninit\",value:function(e){var o,r,n,a,u;(o=t,r=\"oninit\",n=this,u=p(y(1&(a=3)?o.prototype:o),r,n),2&a&&\"function\"==typeof u?function(e){return u.apply(n,e)}:u)([e]),this.url=m.prop(\"\"),console.log(\"[Iframe扩展] 模态框初始化\")}},{key:\"content\",value:function(){return console.log(\"[Iframe扩展] 渲染模态框内容\"),m(\"div\",{className:\"Modal-body\"},m(\"p\",null,app.translator.trans(\"flarum-iframe.forum.modal.instructions\")),m(u.TextField,{className:\"FormControl\",bidi:this.url,placeholder:app.translator.trans(\"flarum-iframe.forum.modal.placeholder\")}),m(\"div\",{className:\"Form-actions\"},m(\"button\",{type:\"button\",className:\"Button Button--primary\",onclick:this.embedIframe.bind(this)},app.translator.trans(\"flarum-iframe.forum.modal.submit_button\"))))}},{key:\"embedIframe\",value:function(){var e=this.url();if(e){console.log(\"[Iframe扩展] 开始嵌入IFRAME，URL:\",e);var t=app.composer,o=t.body(),r=\"https://run.scdev.top/?url=\".concat(encodeURIComponent(e)),n=\"[iframe]\".concat(r,\"[/iframe]\");console.log(\"[Iframe扩展] 插入代码:\",n),t.body(o+\"\\n\\n\"+n),app.modal.close()}}}])}(u.Modal),g=o(3),h=o.n(g),O=o(4),j=o.n(O);a.a.initializers.add(\"leonmmcoset-iframe\",(function(){console.log(\"[Iframe扩展] 初始化开始\"),Object(r.extend)(h.a.prototype,\"toolbarItems\",(function(e){console.log(\"[Iframe扩展] 用户登录状态:\",a.a.user?\"已登录\":\"未登录\"),a.a.user&&(console.log(\"[Iframe扩展] 用户权限列表:\",a.a.user.permissions()),console.log(\"[Iframe扩展] 检查权限: forum.iframe.embed\",a.a.user.hasPermission(\"forum.iframe.embed\"))),a.a.user&&a.a.user.hasPermission(\"forum.iframe.embed\")?(console.log(\"[Iframe扩展] 添加嵌入按钮\"),e.add(\"iframe\",j.a.component({icon:\"fas fa-external-link-alt\",onclick:function(){console.log(\"[Iframe扩展] 按钮点击，打开模态框\"),a.a.modal.show(new v)},children:a.a.translator.trans(\"flarum-iframe.forum.composer.embed_iframe_button\")}))):console.log(\"[Iframe扩展] 用户无权限，不显示按钮\")})),console.log(\"[Iframe扩展] 初始化完成\")}))}]);","extractedComments":[]}