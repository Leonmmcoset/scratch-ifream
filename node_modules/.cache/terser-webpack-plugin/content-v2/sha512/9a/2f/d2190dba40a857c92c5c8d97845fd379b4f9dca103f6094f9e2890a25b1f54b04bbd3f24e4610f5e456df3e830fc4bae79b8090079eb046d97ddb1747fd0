{"map":"{\"version\":3,\"sources\":[\"forum.js\"],\"names\":[\"module\",\"exports\",\"modules\",\"installedModules\",\"__webpack_require__\",\"moduleId\",\"i\",\"l\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"flarum\",\"core\",\"compat\",\"__webpack_exports__\",\"_setPrototypeOf\",\"e\",\"setPrototypeOf\",\"__proto__\",\"external_flarum_core_compat_extend_\",\"Button_\",\"Button_default\",\"TextEditor_\",\"TextEditor_default\",\"Modal_\",\"forum_EmbedLinkModal\",\"_Modal\",\"EmbedLinkModal\",\"apply\",\"this\",\"arguments\",\"constructor\",\"_proto\",\"className\",\"title\",\"app\",\"translator\",\"trans\",\"content\",\"placeholder\",\"bidi\",\"link\",\"a\",\"type\",\"loading\",\"onclick\",\"embed\",\"init\",\"prop\",\"hide\",\"attrs\",\"onEmbed\",\"alert\",\"items\",\"add\",\"component\",\"icon\",\"openEmbedModal\",\"modal\",\"show\",\"insertEmbed\",\"insertAtCursor\",\"initializers\",\"addTranslations\",\"leonmmcoset-scratch-iframe\",\"forum\",\"buttons\",\"insert\",\"description\",\"submit\",\"error\"],\"mappings\":\"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\"}","code":"module.exports=function(t){var o={};function e(r){if(o[r])return o[r].exports;var n=o[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=o,e.d=function(t,o,r){e.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:r})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,o){if(1&o&&(t=e(t)),8&o)return t;if(4&o&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&o&&\"string\"!=typeof t)for(var n in t)e.d(r,n,function(o){return t[o]}.bind(null,n));return r},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,\"a\",o),o},e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},e.p=\"\",e(e.s=5)}([function(t,o){t.exports=flarum.core.compat[\"components/TextEditor\"]},function(t,o){t.exports=flarum.core.compat[\"components/Button\"]},function(t,o){t.exports=flarum.core.compat.extend},function(t,o){t.exports=flarum.core.compat[\"components/Modal\"]},function(t,o){t.exports=flarum.core.compat[\"components/ModalManager\"]},function(t,o,e){\"use strict\";function r(t,o){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,o){return t.__proto__=o,t})(t,o)}e.r(o);var n=e(2),a=e(1),i=e.n(a),c=e(0),s=e.n(c),l=(e(4),e(3)),u=function(t){function o(){return t.apply(this,arguments)||this}var e,n;n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=o.prototype;return a.className=function(){return\"EmbedLinkModal Modal--small\"},a.title=function(){return app.translator.trans(\"leonmmcoset-scratch-iframe.forum.modal.title\")},a.content=function(){return m(\"div\",{className:\"Modal-body\"},m(\"p\",null,app.translator.trans(\"leonmmcoset-scratch-iframe.forum.modal.description\")),m(\"div\",{className:\"Form-group\"},m(\"input\",{className:\"FormControl\",placeholder:app.translator.trans(\"leonmmcoset-scratch-iframe.forum.modal.placeholder\"),bidi:this.link})),m(\"div\",{className:\"Form-group\"},m(i.a,{type:\"submit\",className:\"Button Button--primary\",loading:this.loading,onclick:this.embed.bind(this)},app.translator.trans(\"leonmmcoset-scratch-iframe.forum.modal.submit\"))))},a.init=function(){t.prototype.init.call(this),this.link=m.prop(\"\")},a.embed=function(){this.loading=!0,this.link()?(this.hide(),this.attrs.onEmbed(this.link())):(alert(app.translator.trans(\"leonmmcoset-scratch-iframe.forum.modal.error\")),this.loading=!1)},o}(e.n(l).a);Object(n.extend)(s.a.prototype,\"controlItems\",(function(t){t.add(\"embed-scratch\",i.a.component({icon:\"fas fa-code\",onclick:this.openEmbedModal.bind(this),className:\"Button Button--icon\",title:app.translator.trans(\"leonmmcoset-scratch-iframe.forum.buttons.insert\")}))})),s.a.prototype.openEmbedModal=function(){app.modal.show(new u({onEmbed:this.insertEmbed.bind(this)}))},s.a.prototype.insertEmbed=function(t){this.insertAtCursor(\"[scratch]\"+t+\"[/scratch]\")},app.initializers.add(\"leonmmcoset/scratch-iframe\",(function(){app.translator.addTranslations(\"zh-Hans\",{\"leonmmcoset-scratch-iframe\":{forum:{buttons:{insert:\"插入Scratch项目\"},modal:{title:\"嵌入Scratch项目\",description:\"请输入要嵌入的项目链接:\",placeholder:\"https://scratch.mit.edu/projects/12345678\",submit:\"嵌入\",error:\"请输入有效的链接\"}}}})}))}]);","extractedComments":[]}