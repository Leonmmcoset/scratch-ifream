(()=>{var e={n:o=>{var r=o&&o.__esModule?()=>o.default:()=>o;return e.d(r,{a:r}),r},d:(o,r)=>{for(var t in r)e.o(r,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:r[t]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};(()=>{"use strict";e.r(o),e.d(o,{extend:()=>y});const r=flarum.reg.get("core","common/app");e.n(r)().initializers.add("leonmmcoset-scratch-ifream-common",(()=>{console.log("[leonmmcoset/scratch-ifream] Hello, forum and admin!")}));const t=flarum.reg.get("core","forum/app");var n=e.n(t);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}const a=flarum.reg.get("core","common/components/Button");var i=e.n(a);const s=flarum.reg.get("core","common/components/Modal");var l=e.n(s);const u=flarum.reg.get("core","common/components/TextField");var f=e.n(u);const d=flarum.reg.get("core","common/components/TextEditor");var p=e.n(d);const h=flarum.reg.get("core","common/extend");class b extends(l()){constructor(){var e,o;super(...arguments),e=this,(o=function(e){var o=function(e){if("object"!=c(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(o)?o:o+""}(o="url"))in e?Object.defineProperty(e,o,{value:"",enumerable:!0,configurable:!0,writable:!0}):e[o]=""}className(){return"ScratchIframeModal Modal--small"}title(){return"添加Scratch项目链接"}content(){return m("div",{className:"Modal-body"},[m("div",{className:"Form-group"},[m(f(),{label:"Scratch项目链接",placeholder:"输入Scratch项目链接",value:this.url,oninput:e=>{this.url=e}})]),m("div",{className:"Form-group"},[m(i(),{className:"Button Button--primary",onclick:this.onSubmit.bind(this)},"添加")])])}onSubmit(){if(!this.url)return;const e=this.attrs.editor,o=n().forum.attribute("leonmmcoset-scratch-ifream.run_url")+encodeURIComponent(this.url),r='<iframe src="'.concat(o,'" width="100%" height="600" frameborder="0" allowfullscreen></iframe>');e.insertAtCursor(r),this.hide()}}function y(){n().initializers.add("leonmmcoset-scratch-ifream",(()=>{(0,h.extend)(p().prototype,"toolbarItems",(function(e){const o=n().session.user;o&&o.hasPermission("leonmmcoset.scratch-ifream.use")&&e.add("scratch-iframe",m(i(),{icon:"fas fa-code",onclick:()=>{n().modal.show(b,{editor:this})}},n().translator.trans("leonmmcoset-scratch-ifream.forum.add_scratch_button")))}))}))}n().initializers.add("leonmmcoset-scratch-ifream",(()=>{console.log("[leonmmcoset/scratch-ifream] Hello, forum!")}))})(),module.exports=o})();
//# sourceMappingURL=forum.js.map